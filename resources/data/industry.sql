-- if the sqlite EXE is located at the parent of this folder ...
-- ../sqlite3 industry.db < migration.sql
DROP TABLE IF EXISTS samples;
CREATE TABLE samples (
ID INTEGER PRIMARY KEY,
-- IMAGE_ID INTEGER,
CATEGORY VARCHAR(64) NOT NULL,
PRODUCT_NO VARCHAR(128) NOT NULL,
DRAWING_NO VARCHAR(128),
SAMPLE_DATE DATE NULL,
MOLD_RELEASE_DATE DATE NULL,
UNIT_PRICE DOUBLE DEFAULT 0,
MATERIAL VARCHAR(128),
STRENGTH_TEST VARCHAR(128),
DIMENSION_CHECK VARCHAR(128) );

CREATE INDEX IDX__SAMPLES__CATEGORY ON samples (CATEGORY);
CREATE INDEX IDX__SAMPLES__PRODUCT_NO ON samples (PRODUCT_NO);
CREATE INDEX IDX__SAMPLES__DRAWING_NO ON samples (DRAWING_NO);
CREATE INDEX IDX__SAMPLES__SAMPLE_DATE ON samples (SAMPLE_DATE);
CREATE INDEX IDX__SAMPLES__MOLD_RELEASE_DATE ON samples (MOLD_RELEASE_DATE);

DROP TABLE IF EXISTS images;
CREATE TABLE images (
ID INTEGER PRIMARY KEY,
SAMPLE_ID INTEGER NOT NULL,
NAME VARCHAR(128) NOT NULL,
-- B_L_O_B BLOB,
B_L_O_B TEXT );

CREATE INDEX IDX__IMAGES__SAMPLE_ID ON images (SAMPLE_ID);

DROP TABLE IF EXISTS item_codes;
CREATE TABLE item_codes (
ID INTEGER PRIMARY KEY,
SAMPLE_ID INTEGER NOT NULL,
NAME VARCHAR(128) NOT NULL,
COLOR_CODE VARCHAR(128),
CONFIRMATION_DATE DATE NULL,
REMARK TEXT );

CREATE INDEX IDX__ITEM_CODES__NAME ON item_codes (NAME);
CREATE INDEX IDX__ITEM_CODES__COLOR_CODE ON item_codes (COLOR_CODE);
CREATE INDEX IDX__ITEM_CODES__CONFIRMATION_DATE ON item_codes (CONFIRMATION_DATE);

